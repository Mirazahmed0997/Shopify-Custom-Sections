{% comment %}
  Floating Navbar Section (Responsive + Hamburger Menu)
{% endcomment %}

<section class="floating-navbar">
    
          <div class="nav-container">
    
    <!-- Logo -->
    <a href="/" class="nav-logo">
      {% if section.settings.logo_icon != blank %}
        <span class="nav-logo-icon">{{ section.settings.logo_icon }}</span>
      {% endif %}
      <span class="nav-logo-text">{{ section.settings.logo_text }}</span>
    </a>

    <!-- Desktop Menu -->
    <nav class="nav-links desktop-nav">
      {% for block in section.blocks %}
        <a href="{{ block.settings.link }}" class="nav-link{% if block.settings.active %} active{% endif %}">
          {% if block.settings.icon != blank %}
            <span class="nav-link-icon">{{ block.settings.icon }}</span>
          {% endif %}
          {{ block.settings.text }}
        </a>
      {% endfor %}
    </nav>

    <!-- Icons + Hamburger -->
    <div class="nav-right">
      {% if section.settings.show_search %}
        <a href="/search" class="nav-icon">üîç</a>
      {% endif %}
      {% if section.settings.show_cart %}
        <a href="/cart" class="nav-icon">üõí</a>
      {% endif %}

      <!-- Hamburger Button -->
      <button class="hamburger" id="navToggle" aria-label="Menu">
        ‚ò∞
      </button>
    </div>
  </div>
  

  <!-- Mobile Dropdown Menu -->
  <div class="mobile-nav" id="mobileNav">
    {% for block in section.blocks %}
      <a href="{{ block.settings.link }}" class="mobile-link{% if block.settings.active %} active{% endif %}">
        {% if block.settings.icon != blank %}
          <span class="nav-link-icon">{{ block.settings.icon }}</span>
        {% endif %}
        {{ block.settings.text }}
      </a>
    {% endfor %}
  </div>
</section>

<style>
/* Navbar Container */

.floating-navbar {
  position: fixed;   /* <-- Makes it stick */
  top: 10px;          /* <-- Distance from top */
  z-index: 9999;      /* <-- Stays above other elements */
  background: #151A26;
  border-radius: 50px;
  max-width: 60%;
  margin: 10px auto;
  margin-left: 700px;
  padding: 10px 20px;
  display: flex;
  flex-direction: column;
  animation: floatNavbar 4s ease-in-out infinite;
  box-shadow: 0 4px 20px rgba(0,0,0,0.5);
}


/* Floating Animation */
@keyframes floatNavbar {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-4px); }
}

.nav-container {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;

}

.nav-logo {
  display: flex;
  align-items: center;
  padding-right:10px;
  font-size: 1.3rem;
  font-weight: bold;
  color: #4ade80;
  text-decoration: none;
}

.nav-links {
  display: flex;
  gap: 20px;
}

.nav-link {
  color: white;
  font-weight: 500;
  text-decoration: none;
  padding: 6px 12px;
  border-radius: 8px;
  transition: background 0.3s ease, color 0.3s ease;
}
.nav-link:hover { background: rgba(255,255,255,0.1); }
.nav-link.active { background: #22c55e; color: white; }

.nav-right {
  display: flex;
  align-items: center;
  gap: 15px;
}

.nav-icon {
  color: white;
  font-size: 1.2rem;
  text-decoration: none;
  transition: transform 0.3s ease;
}
.nav-icon:hover { transform: scale(1.2); }

/* Hamburger */
.hamburger {
  display: none;
  font-size: 1.6rem;
  color: white;
  background: none;
  border: none;
  cursor: pointer;
}

/* Mobile Nav */
.mobile-nav {
  display: none;
  flex-direction: column;
  background: #0b1221;
  border-radius: 0 0 20px 20px;
  padding: 10px 0;
  margin-top: 10px;

}
.mobile-link {
  color: white;
  text-decoration: none;
  padding: 10px 20px;
  display: block;
  transition: background 0.3s ease;
}
.mobile-link:hover { background: rgba(255,255,255,0.1); }
.mobile-link.active { background: #22c55e; color: white; }

/* Responsive */
@media (max-width: 768px) {
  .desktop-nav {
    display: none;
  }
  .hamburger {
    display: block;
  }
}








@media (max-width: 1400px) {
  .floating-navbar {
    /* keep narrow look but center so it doesn't overflow */
    max-width: 60%;
     margin-left: 150px;    {% comment %} margin-left: auto; {% endcomment %}
    margin-right: auto;
    padding: 10px
  }
}

/* Tablet */
@media (max-width: 1200px) {
  .floating-navbar {
    max-width: 60%;
    margin-left: 150px;
    {% comment %} margin-left: auto; {% endcomment %}
    margin-right: auto;
    padding: 10px 16px;
  }
}

/* Mobile */
@media (max-width: 768px) {
  .floating-navbar {
    /* become near full-width and centered for usability */
    max-width: 60%;
    margin-left: 150px;
    width: 100%;
    {% comment %} margin: 10px auto; {% endcomment %}
    border-radius: 30px;
    padding: 8px 12px;
  }

  /* show hamburger & hide desktop links on mobile */
  .desktop-nav { display: none !important; }
  .hamburger { display: block !important; }

  /* keep icons visible */
  .nav-right { gap: 10px; }

  /* mobile menu full width */
  .mobile-nav { width: 100%; padding: 8px 0; }
  .mobile-link { padding: 8px 15px; }
}

/* Small phones */
@media (max-width: 480px) {
  .floating-navbar {
    max-width: 60%;
    {% comment %} margin: 6px auto; {% endcomment %}
    margin-left: 150px;
    padding: 15px 5px 15px 5px;
    border-radius: 20px;
  }

  .nav-logo { font-size: 1rem; }
  .nav-icon { font-size: 1rem; }
  .hamburger { font-size: 1.2rem; }
}

</style>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const navToggle = document.getElementById('navToggle');
  const mobileNav = document.getElementById('mobileNav');

  navToggle.addEventListener('click', () => {
    mobileNav.style.display = (mobileNav.style.display === 'flex') ? 'none' : 'flex';
  });
});
</script>

{% schema %}
{
  "name": "Custom Floating Navbar",
  "settings": [
    {
      "type": "text",
      "id": "logo_icon",
      "label": "Logo Icon",
      "default": "üíé"
    },
    {
      "type": "text",
      "id": "logo_text",
      "label": "Logo Text",
      "default": "Oracle's Shop"
    },
    {
      "type": "checkbox",
      "id": "show_search",
      "label": "Show Search Icon",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_cart",
      "label": "Show Cart Icon",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "link",
      "name": "Menu Link",
      "settings": [
        {
          "type": "text",
          "id": "icon",
          "label": "Icon (emoji or HTML)"
        },
        {
          "type": "text",
          "id": "text",
          "label": "Link Text",
          "default": "Menu Item"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link URL"
        },
        {
          "type": "checkbox",
          "id": "active",
          "label": "Highlight as Active",
          "default": false
        }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [
    {
      "name": "Floating Navbar",
      "blocks": [
        {
          "type": "link",
          "settings": {
            "icon": "üíé",
            "text": "Portal Home",
            "link": "/",
            "active": true
          }
        },
        {
          "type": "link",
          "settings": {
            "icon": "üåô",
            "text": "Dreamcatchers",
            "link": "/collections/dreamcatchers"
          }
        },
        {
          "type": "link",
          "settings": {
            "icon": "‚ú®",
            "text": "Spell Books",
            "link": "/collections/spell-books"
          }
        },
        {
          "type": "link",
          "settings": {
            "icon": "üíé",
            "text": "Gem Orbs",
            "link": "/collections/gem-orbs"
          }
        },
        {
          "type": "link",
          "settings": {
            "icon": "‚ú®",
            "text": "Mystical Candles",
            "link": "/collections/mystical-candles"
          }
        }
      ]
    }
  ]
}
{% endschema %}
